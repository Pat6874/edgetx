//
// WARNING: DO NOT EDIT THIS FILE
//   This file has been generated from the target's JSON hardware description
//

{% set regular_switches = switches | selectattr('type','!=','FSWITCH') | list %}
{% set function_switches = switches | selectattr('type','==','FSWITCH') | list %}

static const stm32_switch_t _switch_defs[] = {
{% for switch in regular_switches %}
  {% if switch.type == '2POS' %}
  {
    "{{ switch.name }}",
    {{ switch.gpio }}, {{ switch.pin }},
    nullptr, 0,
    SWITCH_HW_2POS, {{ 'SWITCH_HW_INVERTED' if switch.inverted else 0 }}
  },
  {% elif switch.type == '3POS' %}
  {
    "{{ switch.name }}",
    {{ switch.gpio_high }}, {{ switch.pin_high }},
    {{ switch.gpio_low }}, {{ switch.pin_low }},
    SWITCH_HW_3POS, {{ 'SWITCH_HW_INVERTED' if switch.inverted else 0 }}
  },
  {% elif switch.type == 'ADC' %}
  {
    "{{ switch.name }}",
    nullptr, {{ adc_index[switch.adc_input] }},
    nullptr, 0,
    SWITCH_HW_ADC, {{ 'SWITCH_HW_INVERTED' if switch.inverted else 0 }}
  },
  {% endif %}
{% endfor %}
{% for switch in function_switches %}
  {
    "{{ switch.name }}",
    {{ switch.gpio }}, {{ switch.pin }},
    nullptr, 0,
    SWITCH_HW_2POS, {{ 'SWITCH_HW_INVERTED' if switch.inverted else 0 }}
  },
{% endfor %}
};

static GPIO_TypeDef* const _switch_GPIOs[] = {
{% for sw_gpio, pins in switch_gpios.items() | sort %}
  {{ sw_gpio }},
{% endfor %}
};

constexpr uint8_t n_switches = {{ regular_switches | count }};
constexpr uint8_t n_fct_switches = {{ function_switches | count }};
constexpr uint8_t n_total_switches = {{ switches | count }};
